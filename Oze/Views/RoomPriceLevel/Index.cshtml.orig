
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootbox.js/4.4.0/bootbox.min.js"></script>
<link rel="stylesheet" href="~/Themes/plugins/datatables/dataTables.bootstrap.css">
<link rel="stylesheet" href="~/Content/Oze.css">
<link rel="stylesheet" href="~/Content/hungpvCustom.css">
<!--<link rel="stylesheet" href="https://datatables.net/media/css/site.css?_=b05357026107a2e3ca397f642d976192" />-->
<div class="tab-title">
    <ul class="nav nav-tabs" role="tablist">
        <li role="presentation" class="active"><a aria-controls="Quản lý NCC" role="tab" data-toggle="tab">Quản lý giá hạng phòng</a></li>
    </ul>
</div>
<div class="row">
    <form id="formSearch" class="form-horizontal MarginTop20">
        @*<div class="col-md-6">
                <div class="form-group form-group-sm">//lamlt
                    <label class="col-md-4 control-label" style="text-align:left">Họ tên khách hàng </label>
                    <div class="col-md-8">
                        <input type="text" placeholder="Họ tên khách hàng" class="form-control" id="searchCustomerName" name="searchCustomerName">
                    </div>
                </div>
            </div>

            <div class="col-md-6">
                <div class="form-group form-group-sm">
                    <label class="col-md-4 control-label" style="text-align:left">Số điện thoại</label>
                    <div class="col-md-8">
                        <input type="text" placeholder="Số điện thoại" class="form-control" id="searchPhone" name="searchPhone">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group form-group-sm">
                    <label class="col-md-4 control-label" style="text-align:left">Số CMT/Passpor</label>
                    <div class="col-md-8">
                        <input type="text" placeholder="Số CMT/Passpor" class="form-control" id="searchTax_Passpor" name="searchTax_Passpor">
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group form-group-sm">
                    <label class="col-md-4 control-label" style="text-align:left">Email</label>
                    <div class="col-md-8">
                        <input type="text" placeholder="Email" class="form-control" id="searchEmail" name="searchEmail">
                    </div>
                </div>
            </div>*@
        <div class="col-md-6 .col-sm-3 ">
            <div class="form-group form-group-sm" style="position:relative;">
                <label class="col-md-4 control-label" style="text-align:left">Từ ngày (<font color="red">*</font>)</label>
                <div class="col-md-8">
                    <div class="input-group input-group-sm date-search-picker_fdate" id="SearchPeriodFormdate">
                        <input type="text" placeholder="Từ ngày" required="1" class="form-control date-picker" id="SearchFdate">
                        <span class="input-group-addon input-group-addon-custom">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
            </div>
            @*<input type="checkbox" id="checkDate" name="checkDate" />*@
        </div>
        <div class="col-md-6 ">
            <div class="form-group form-group-sm">
                <label class="col-md-4 control-label" style="text-align:left">Tới ngày (<font color="red">*</font>)</label>
                <div class="col-md-8">
                    <div class="input-group input-group-sm date-search-picker_tdate" id="SearchPeriodFormdate">
                        <input type="text" placeholder="Tới ngày" required="1" class="form-control date-picker" id="SearchTdate">
                        <span class="input-group-addon input-group-addon-custom">
                            <span class="glyphicon glyphicon-calendar"></span>
                        </span>
                    </div>
                </div>
            </div>
        </div>
        @*<ul class="nav nav-tabs">
                <li id="liAddNew" style="float: right;margin-left: 5px;">
                    <button type="button" id="btnaddnewPriceByroom" class="btn btn-block btn-oze btn-oze-add btn-flat">Cập nhật</button>
                </li>
                <li id="liClose" style="float: right;margin-left: 5px;">
                    <button type="button" id="btnClose" class="btn btn-block btn-oze btn-flat">Hủy</button>
                </li>
            </ul>*@
        <div class=" col-md-offset-9">
            <button id="btnSearch" class="btn btn-warning btn-sm btn-flat" type="button">Tìm kiếm</button>
            <button id="btnAdd" class="btn btn-warning btn-sm btn-flat" type="button">Thêm mới</button>
            <button id="btnRefresh" class="btn btn-sm btn-df btn-flat" type="reset">Làm mới</button>
        </div>

    </form>
    @*<section>
            <input id="txtSearch" type="text" placeholder="Search" /> <!-- Trigger the modal with a button -->
            <button type="button" class="btn btn-info btn-sm" onclick='javascript: editDialog(0);' style="float: right">Thêm mới</button>
        </section>*@
    <div class="col-md-12">
        <table id="example" class="table table-striped table-bordered" cellspacing="0" width="100%">
            <thead>
                <tr>
                    <th>STT</th>
                    <th>Khách sạn</th>
                    <th>Hạng phòng</th>
                    <th style="text-align: center">Giá ngày</th>
                    <th>Giá quan đêm</th>
                    <th>Giá tháng</th>
                    <th>Ngày tạo</th>
                    <th>Thao tác</th>
                </tr>
            </thead>
        </table>
    </div>
</div>
<!-- Modal For CRUID -->
<div id="myModal" class="modal fade" role="dialog">
    <div class="modal-dialog modal-lg">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">Thêm mới</h4>
            </div>
            <div class="modal-body">
                <div class="modal-body-content">
                    <p>Loading...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" id="btnSave" class="btn btn-default">Save</button> <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<div class="modal fade " id="modalDetails" tabindex="-1" role="dialog" aria-labelledby="xModal">
    <div class="modal-dialog modal-lg modal-admin" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"><label id="TittleBox">Thông tin khách hàng</label></h4>
            </div>
            <div class="modal-body">
                <div class="modal-body-content">
                    <p>Loading...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnUAddDetail" class="btn btn-primary" type="button"><i class="fa fa-check"></i> Lưu</button>
                <button type="button" class="btn btn-df" data-dismiss="modal"><i class="fa fa-reply"></i>Đóng</button>
            </div>
        </div>
    </div>
</div>
<div class="modal fade " id="modaHotel" tabindex="-1" role="dialog" aria-labelledby="xModal">
    <div class="modal-dialog modal-lg" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"><label id="TittleBox">Chọn phòng</label></h4>
            </div>
            <div class="modal-body">
                <div class="modal-body-content">
                    <p>Loading...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button id="btnAddHotel" class="btn btn-primary" type="button"><i class="fa fa-check"></i> Lưu</button>
                <button type="button" class="btn btn-df" data-dismiss="modal"><i class="fa fa-reply"></i>Đóng</button>
            </div>
        </div>
    </div>
</div>
<!--script-->
<script src="~/Themes/plugins/datatables/jquery.dataTables.js"></script>
<script src="~/Themes/plugins/datatables/dataTables.bootstrap.js"></script>
<script src="~/Themes/plugins/slimScroll/jquery.slimscroll.min.js"></script>
<script src="~/Scripts/jquery.validate.js"></script>
<script src="~/Scripts/oze.common.js"></script>
<script src="~/Scripts/oze/oze.RoomPriceLevel.js"></script>
<style>
    .modal-admin {
        width: 90% !important;
    }

    .nav-tabs .active {
        background-color: #d2d6de !important;
        border-bottom: 1px solid #f27c2e !important;
    }

    .divmaughi {
        background-color: #ddd;
        padding-left: 5px;
        height: 36px;
        padding-top: 7px;
        font-size: 15px;
        width: 83%;
    }

    .divmauxanh {
        background-color: #0e4458;
        padding-left: 5px;
        height: 36px;
        padding-top: 7px;
        color: white;
        font-size: 15px;
        /*width: 32%;*/
    }

    .nav-tabs a {
        font-size: 15px;
        font-family: Arial;
        font-weight: bold;
        text-align: center;
    }

    /*.active a {
        background-color: #d2d6de !important;
        font-size: 15px;
        font-family: Arial;
        font-weight: bold;
        text-align: center;
    }

    /*.nav-tabs li a {
        background-color: transparent;
    }

        .nav-tabs li a:hover {
            background-color: transparent;
            font-size: 16px;
            font-family: Arial;
            font-weight: bold;
            color: #3c8dbc;
            border: none;
        }*/

    /*.nav-tabs .active a:hover {
        font-size: 15px;
    }

    .content {
        padding-left: 5px;
    }



    /* Base for label styling */
    /*[type="checkbox"]:not(:checked),
       [type="checkbox"]:checked {
           position: absolute;
           left: -9999px;
       }*/

    /*[type="checkbox"]:not(:checked) + label,
    [type="checkbox"]:checked + label {
        position: relative;
        padding-left: 25px;
        cursor: pointer;
    }*/

    /* checkbox aspect */



    /* hover style just for information */
    label:hover:before {
        border: 1px solid #4778d9 !important;
    }

    .col-sm-5 {
        padding-left: 0px;
        padding-right: 0px !important;
    }

    .col-sm-7 {
        padding-left: 0px;
        padding-right: 0px;
    }

    .form-group {
        padding-top: 5px;
        padding-bottom: 5px;
    }

    .col-sm-5 p {
        vertical-align: middle;
        line-height: normal;
        padding-top: 3px;
        margin: 0 0 0px;
    }

    .col-sm-2 .fa {
        padding: 10px 5px 5px 0px;
        cursor: pointer;
    }

    [type="checkbox"]:not(:checked), [type="checkbox"]:checked {
        position: inherit;
        /*left: -9999px;*/
    }
</style>
<script type="text/javascript">
    var $table;
    var addDays = function () {
        var dat = new Date();
        dat.setDate(dat.getDate() + parseInt(-30));

        return new Date(dat);
    }
    $(document).ready(function () {
        $(".date-picker").blur(function () {
            if ($(this).val() == "") {
                var date = new Date();
                var _fn = date.getDate();
                var _ft = date.getMonth();
                var _fna = date.getFullYear();
                var ft = (_ft + 1);

                if (ft < 10)
                    ft = "0" + ft;
                var fdate = (_fn + "/" + ft + "/" + _fna);
                $(this).val(fdate);

            }
        });
        $("#btnSearch")
            .click(function () {
                if ($('input[name=checkDate]:checked', '#formSearch').val()) {

                    if (!$("#formSearch").valid()) return;
                }
                $table.ajax.reload();
            });
        /*  Description: Cấu hình Mask datetime
   Author: hungpv  */
        $(".date-search-picker_fdate").datetimepicker({
            //debug:true,
            //locale: 'vi',
            format: 'DD/MM/YYYY',
            showTodayButton: true,
            maxDate: new Date(),
            defaultDate: addDays(),
            showClose: false

        });

        $(".date-search-picker_tdate").datetimepicker({
            //locale: 'vi',
            format: 'DD/MM/YYYY',
            showTodayButton: true,
            maxDate: new Date(),
            defaultDate: new Date(),
            showClose: false
        });

        showDialogLoading();
        $table = $('#example').DataTable({
            "language": {
                "sProcessing": "Đang xử lý...",
                "sLengthMenu": "Xem _MENU_ mục",
                "sZeroRecords": "Không tìm thấy dòng nào phù hợp",
                "sInfo": "Đang xem _START_ đến _END_ trong tổng số _TOTAL_ mục",
                "sInfoEmpty": "Đang xem 0 đến 0 trong tổng số 0 mục",
                "sInfoFiltered": "(được lọc từ _MAX_ mục)",
                "sInfoPostFix": "",
                "sSearch": "Tìm:",
                "sUrl": "",
                "oPaginate": {
                    "sFirst": "Đầu",
                    "sPrevious": "Trước",
                    "sNext": "Tiếp",
                    "sLast": "Cuối"
                }
            },
            "processing": true,
            "serverSide": true,
            "initComplete": function (settings, json) {
                hideDialogLoading();
                //alert( 'DataTables has finished its initialisation.' );
            },
            /*bFilter: false, bInfo: false,*/
            "dom": '<"top">rt<"bottom" lip><"clear">',
            "ajax": {
                "url": "/RoomPriceLevel/List",
                "data": function (d) {
                    //d.search = $("#txtSearch").val();
                    //d.Name = $("#formSearch :input[name='searchCustomerName']").val();
                    //d.Email = $("#formSearch :input[name='searchEmail']").val();
                    d.Fdate = $("#formSearch :input[id='SearchFdate']").val();
                    d.Tdate = $("#formSearch :input[id='SearchTdate']").val();
                    //d.Phone = $("#formSearch :input[name='searchPhone']").val();
                    //d.Tax_Passpor = $("#formSearch :input[name='searchTax_Passpor']").val();
                    //d.CheckDate = $('input[name=checkDate]:checked', '#formSearch').val();

                }
            },
            "columns":
                [
                {
                    "data": null, render: function (data, type, row, infor) {
<<<<<<< HEAD
=======
                    
>>>>>>> b17b42c7db83a039a5f6706cbeac30e997b0c73e
                        return $table.page.info().page + infor.row + 1;
                    }
                },
               { "data": "HotelName", "orderable": "false" },
                { "data": "Room_TypeName", "orderable": "false" },
                    {
                        "data": null, render: function (data, type, row, infor) {
<<<<<<< HEAD
                            return row.PriceDay === null ? "" : row.PriceDay.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
=======
                            return row.PriceDay == null ? "0" : row.PriceDay.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
>>>>>>> b17b42c7db83a039a5f6706cbeac30e997b0c73e
                        }, className: "dt-body-right"
                    },
                    {
                        "data": null, render: function (data, type, row, infor) {
<<<<<<< HEAD
                            return row.PriceNight === null ? "" : row.PriceNight.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
=======
                            return row.PriceNight == null ? "0" : row.PriceNight.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
>>>>>>> b17b42c7db83a039a5f6706cbeac30e997b0c73e
                        }, className: "dt-body-right"
                    },
                    {
                        "data": null, render: function (data, type, row, infor) {
<<<<<<< HEAD
                            return row.PriceMonth === null ? "" : row.PriceMonth.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
=======
                            return row.PriceMonth == null ? "0" : row.PriceMonth.toString().replace('.', ',').replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1.');
>>>>>>> b17b42c7db83a039a5f6706cbeac30e997b0c73e
                        }, className: "dt-body-right"
                    },
                    {
                        "data": null, render: function (data, type, row, infor) {
<<<<<<< HEAD
                            return row.DateCreate === null ? "" : moment(new Date(parseInt(row.DateCreate.slice(6, -2)))).format("DD-MM-YYYY");
=======
                            return row.DateCreate ==null?"": moment(new Date(parseInt(row.DateCreate.slice(6, -2)))).format("DD-MM-YYYY");
>>>>>>> b17b42c7db83a039a5f6706cbeac30e997b0c73e
                        }
                    },
                {
                    "data": null, render: function (data, type, row, infor) {

                        return "<div style='width:10px;display:inline'><a title='Thông tin giá phòng'  href='javascript:viewDetailDialog(" + row.id + ")'><i class='fa fa-search-plus'></i></a></div>" +
                            "&nbsp;<div style='width:10px;display:inline'><a title='Sửa'  href='javascript:viewEditlDialog(" + row.id + ")'><i class='fa fa-pencil'></i></a></div>" +
                            "&nbsp;<div style='width:10px;display:inline'><a title='Xóa'   href='javascript:DeleteDialog(" + row.id + ")'><i class='fa fa-times'></i></a></div>";
                    }
                }
                ]
        });
        $("#txtSearch").keypress(function (e) {
            if (e.which == 13) {
                searchGrid();
            }
        });
    });
</script>
